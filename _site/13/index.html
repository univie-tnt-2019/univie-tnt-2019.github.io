<!DOCTYPE html>
<html lang="en">
  <!-- Beautiful Jekyll | MIT license | Copyright Dean Attali 2016 -->
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">

  <title>Social Network Analysis (SNA)</title>

  <meta name="author" content="Students of the Class" />

  
  <meta name="description" content="Basics through Gephi">
  

  <link rel="alternate" type="application/rss+xml" title="070146 KU Methodenkurs (2019S) - TNT—Tools & Techniques for Digital Humanities" href="/feed.xml" />

  

  

  


  
    
      
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" />


    
  

  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
  

  
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

  

  

  

    <!-- Facebook OpenGraph tags -->
  

  
  <meta property="og:title" content="Social Network Analysis (SNA)" />
  

   
  <meta property="og:description" content="Basics through Gephi">
  


  <meta property="og:type" content="website" />

  
  <meta property="og:url" content="http://localhost:4000/13/" />
  <link rel="canonical" href="http://localhost:4000/13/" />
  

  
  <meta property="og:image" content="http://localhost:4000/img/avatar-icon.png" />
  


  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <meta name="twitter:creator" content="@" />

  
  <meta name="twitter:title" content="Social Network Analysis (SNA)" />
  

  
  <meta name="twitter:description" content="Basics through Gephi">
  

  
  <meta name="twitter:image" content="http://localhost:4000/img/avatar-icon.png" />
  

  

  

</head>


  <body>

    

  
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
        <a class="navbar-brand" href="http://localhost:4000">070146 KU Methodenkurs (2019S)</a>
      
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li class="navlinks-container">
            <a class="navlinks-parent" href="javascript:void(0)">Materials</a>
            <div class="navlinks-children">
              
                
                  






<a href="/01">01. CM and AW I</a>

                
              
                
                  






<a href="/02">02. Command Line</a>

                
              
                
                  






<a href="/03">03. VC and Collaboration</a>

                
              
                
                  






<a href="/04">04. CM and AW II</a>

                
              
                
                  






<a href="/05">05. Georeferencing</a>

                
              
                
                  






<a href="/06">06. RegEx</a>

                
              
                
                  






<a href="/07">07. Webscraping</a>

                
              
                
                  






<a href="/08">08. Text Markup [XML]</a>

                
              
                
                  






<a href="/09">09. Structuring data</a>

                
              
                
                  






<a href="/10">10. Text to Map (1/2)</a>

                
              
                
                  






<a href="/11">11. Text to Map (2/2)</a>

                
              
                
                  






<a href="/12">12. TM</a>

                
              
                
                  






<a href="/13">13. SNA</a>

                
              
            </div>
          </li>
        
        
        
          <li>
            






<a href="/about">Syllabus</a>

          </li>
        
        
        
          <li>
            






<a href="/resources">Resources</a>

          </li>
        
        
      </ul>
    </div>

	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="http://localhost:4000">
	      <img class="avatar-img" src="/img/avatar-icon.png" />
		</a>
	  </div>
	</div>
	

  </div>
</nav>


    <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-heading">
          <h1>Social Network Analysis (SNA)</h1>
		  
		    
            <hr class="small">
            <span class="page-subheading">Basics through Gephi</span>
			
		  
		  
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <h1 id="goals">Goals:</h1>

<ol>
  <li>Basics of Social Network Analysis.</li>
  <li>Basics of Gephi.</li>
</ol>

<h1 id="software">Software</h1>

<ul>
  <li><code class="highlighter-rouge">Python</code> (<em>for data preparation</em>)</li>
  <li><code class="highlighter-rouge">Gephi</code> (install from here: <a href="https://gephi.org/">https://gephi.org/</a>)</li>
</ul>

<h1 id="files--scripts">Files &amp; Scripts</h1>

<ul>
  <li><a href="/files/13/star_wars_nodes.csv">Nodes</a>.</li>
  <li><a href="/files/13/star_wars_edges.csv">Edges</a>.</li>
</ul>

<p><strong>NB:</strong> Source of data &gt; <a href="https://github.com/pablobarbera/data-science-workshop/tree/master/sna/data">https://github.com/pablobarbera/data-science-workshop/tree/master/sna/data</a></p>

<h1 id="class">Class</h1>

<ul>
  <li>Basic explanations</li>
  <li>Hands-on tutorial</li>
</ul>

<h1 id="sna-concepts">SNA Concepts</h1>

<ul>
  <li><strong>Networks</strong>
    <ul>
      <li>Patterns of relationships that connect individuals, institutions, or objects (or leave them unconnected)</li>
      <li><em>Examples</em>: family ties—vertical and horizontal; patronage—who pays whom for what services; shared membership in organizations; paterns of contracts among companies.</li>
    </ul>
  </li>
  <li><strong>Main elements</strong>
    <ul>
      <li>Node (vertex, point, item)—person, organization, country, document, etc.</li>
      <li>Edge (tie, link, line)—relationship, friendship, common attendance, co-occurance, kinship, membership
        <ul>
          <li>Directed and Undirected links: marriage—undirected; patronage—directed.</li>
        </ul>
      </li>
      <li>Graphs (Sociograms) / Matrices (pl. of matrix)</li>
    </ul>
  </li>
  <li><strong>Graph properties</strong>
    <ul>
      <li><strong>Density</strong>: number of edges / number of edges in a complete graph (example of complete and incomplete graph)</li>
      <li><strong>Centrality measures</strong>
        <ul>
          <li><em>Degree</em>: Proportional to the number of other nodes to which a node is links – Number of links divided by (n-1). For example: it may measure exposure to what is flowing through the network (opportunity to influence directly; in-degree and out-degree).</li>
          <li><em>Closeness</em> – The sum of shortest paths to all other points in the graph. Divide by (n-1), then invert. For example: it may measure how quickly information can travel.</li>
          <li><em>Betweenness</em> – The extent to which a particular point lies ‘between’ other points in the graph; how many shortest paths (geodesics) is it on? A measure of brokerage or gatekeeping (How often a node lies on the shortest path between two other nodes)</li>
          <li><em>Eigenvector</em> – A weighted measure of centrality that takes into account the centrality of other nodes to which a node is connected.  That is, being connect with other central nodes increases centrality.  E.g., secretary of powerful person.  Google’s page rank algorithm is based on a variation of this approach.</li>
        </ul>
      </li>
      <li><strong>Modularity</strong>—interconnected clusters.</li>
    </ul>
  </li>
</ul>

<h1 id="gephi-data-format-basic">Gephi Data Format (Basic)</h1>

<h2 id="nodes-file">Nodes file</h2>

<p>A CSV file with as many columns as you might need, but one must be <code class="highlighter-rouge">id</code>. These <code class="highlighter-rouge">ids</code> must be used in your edges data file in fields <code class="highlighter-rouge">source</code> and <code class="highlighter-rouge">target</code>.</p>

<p>Often scholars use numbers as <code class="highlighter-rouge">ids</code> in the edges table, while providing all the robust relevant information on the edges in the nodes table. This allows to accommodate as must information on the nodes as one might need (for example, coordinates, if nodes are locations; of affiliations, if nodes are people). This also helps to make edges file significantly smaller, as the information on nodes is not repeated.</p>

<h2 id="edges-file">Edges file</h2>

<p>A CSV file with three columns:</p>

<p>1) <code class="highlighter-rouge">source</code>
2) <code class="highlighter-rouge">target</code>
3) <code class="highlighter-rouge">weight</code></p>

<p>Lots of tutorials for Gephi can be found here: <a href="https://gephi.wordpress.com/">https://gephi.wordpress.com/</a>.</p>

<h1 id="lets-try-star-wars">Let’s try “Star Wars”</h1>

<p>Download files with nodes and edges from the top of the page. Let’s try to load them into Gephi.</p>

<h1 id="collecting-sna-data-from-dispatch">Collecting SNA data from “Dispatch”</h1>

<p>Essentially, you can use the same script that you used to collect toponymic data from articles; here, however, the lines of code that collected toponymic data from a given artice should be replaces with the lines of code that collect network data:</p>

<p>1) collect all relevant items; remove duplicates;
2) convert them into edges (see, function <code class="highlighter-rouge">edges()</code> below);
3) after all the edges are collected, you will need to count their frequencies;
4) the result should be a table (or, a csv/tsv file) with three columns: <code class="highlighter-rouge">source</code>, <code class="highlighter-rouge">target</code>, <code class="highlighter-rouge">weight</code>;
5) weight value can be counted in a number of different ways; by and large, it is up to you, as it depends on what specifically you want to measure.</p>

<h1 id="code-snippets">Code snippets</h1>

<p><em>NB:</em> <code class="highlighter-rouge">edgesDic = {}</code> must be declared in the very beginning of the script.</p>

<div class="language-python highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># updating dictionary</span>
<span class="k">def</span> <span class="nf">updateDic</span><span class="p">(</span><span class="n">dic</span><span class="p">,</span> <span class="n">key</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">dic</span><span class="p">:</span>
        <span class="n">dic</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">dic</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>  <span class="o">=</span> <span class="mi">1</span>

<span class="c"># creating edges from a list</span>
<span class="kn">import</span> <span class="nn">itertools</span>
<span class="k">def</span> <span class="nf">edges</span><span class="p">(</span><span class="n">edgesList</span><span class="p">,</span> <span class="n">edgesDic</span><span class="p">):</span>
    <span class="n">edges</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">itertools</span><span class="o">.</span><span class="n">combinations</span><span class="p">(</span><span class="n">edgesList</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">e</span> <span class="ow">in</span> <span class="n">edges</span><span class="p">:</span>
        <span class="n">key</span> <span class="o">=</span> <span class="s">"</span><span class="se">\t</span><span class="s">"</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">e</span><span class="p">)))</span> <span class="c"># A &gt; B (sorted alphabetically, to avoid cases of B &gt; A)</span>
        <span class="n">updateDic</span><span class="p">(</span><span class="n">edgesDic</span><span class="p">,</span> <span class="n">key</span><span class="p">)</span>

<span class="c"># collectign tagged toponyms into a network</span>
<span class="k">def</span> <span class="nf">collectTaggedToponyms</span><span class="p">(</span><span class="n">xmlText</span><span class="p">,</span> <span class="n">dic</span><span class="p">,</span> <span class="n">date</span><span class="p">):</span>
    <span class="n">xmlText</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s">"</span><span class="err">\</span><span class="s">s+"</span><span class="p">,</span> <span class="s">" "</span><span class="p">,</span> <span class="n">xmlText</span><span class="p">)</span>

    <span class="n">topList</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">t</span> <span class="ow">in</span> <span class="n">re</span><span class="o">.</span><span class="n">findall</span><span class="p">(</span><span class="s">r"&lt;placeName[^&lt;]+&lt;/placeName&gt;"</span><span class="p">,</span> <span class="n">xmlText</span><span class="p">):</span>
        <span class="n">t</span> <span class="o">=</span> <span class="n">t</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r'"(tgn,\d+)'</span><span class="p">,</span> <span class="n">t</span><span class="p">):</span>
            <span class="n">reg</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="s">r'"(tgn,\d+)'</span><span class="p">,</span> <span class="n">t</span><span class="p">)</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">reg</span> <span class="ow">in</span> <span class="n">mapData</span><span class="p">:</span>
                <span class="n">topList</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">reg</span><span class="p">)</span>

    <span class="c"># generating edges and updating their freqs</span>
    <span class="n">edges</span><span class="p">(</span><span class="n">topList</span><span class="p">,</span> <span class="n">edgesDic</span><span class="p">)</span>
</code></pre></div></div>

<h1 id="reference-materials">Reference Materials:</h1>

<ul>
  <li>Some explanations on how to build a network data: Düring, Marten. 2015. “From Hermeneutics to Data to Networks: Data Extraction and Network Visualization of Historical Sources.” Programming Historian, February. <a href="https://programminghistorian.org/lessons/creating-network-diagrams-from-historical-sources">https://programminghistorian.org/lessons/creating-network-diagrams-from-historical-sources</a>.</li>
  <li>Tutorial for Gephi: <a href="https://gephi.org/users/">https://gephi.org/users/</a></li>
  <li>An interesting tutorial on semantic networks: <a href="https://seinecle.github.io/gephi-tutorials/generated-html/working-with-text-en.html">https://seinecle.github.io/gephi-tutorials/generated-html/working-with-text-en.html</a></li>
</ul>

<h2 id="some-interesting-examples">Some interesting examples</h2>

<ul>
  <li>Evelina Gabasova, “The Star Wars Social Network”, at <a href="http://evelinag.com/blog/2015/12-15-star-wars-social-network/">http://evelinag.com/blog/2015/12-15-star-wars-social-network/</a></li>
  <li>Pablo Barbera, “Introduction to social network analysis with R”, at <a href="http://pablobarbera.com/big-data-upf/html/02a-networks-intro-visualization.html">http://pablobarbera.com/big-data-upf/html/02a-networks-intro-visualization.html</a></li>
</ul>

<h1 id="homework">Homework:</h1>

<ol>
  <li>Create a network of people mentioned in the “Dispatch” (if individuals are mentioned in the same article, they must be connected one way or the other—we can use that as the basis for creating edges). Generate a vizualisation in <em>Gephi</em>. Describe your observations on your website as a separate blog post.</li>
  <li>Create a network of places in the “Dispatch”—based on the same assumption. Generate a vizualisation in <em>Gephi</em>, only here you will need to create a geographical network, i.e., a network put over a real map: use <code class="highlighter-rouge">Geo Layout</code> plugin (your file with the data on nodes must also include coordinates). Describe your observations on your website as a separate blog post.</li>
</ol>

	    
        <div class="disqus-comments">
	        <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'univie-tnt-2019';
        /* ensure that pages with query string get the same discussion */
            var url_parts = window.location.href.split("?");
            var disqus_url = url_parts[0];
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <script id="dsq-count-scr" src="//univie-tnt-2019.disqus.com/count.js" async></script>
</div>
        </div>
	        
        <div class="staticman-comments">
          

        </div>
	    
    </div>
  </div>
</div>


    <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links"><li><a href="/feed.xml" title="RSS"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">RSS</span>
              </a>
            </li><li><a href="mailto:maxim.romanov@univie.ac.at" title="Email me"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Email me</span>
              </a>
            </li></ul>
      <p class="copyright text-muted">
      Students of the Class
      &nbsp;&bull;&nbsp;
      2019

      
      &nbsp;&bull;&nbsp;
      <a href="http://localhost:4000">univie-tnt-2019.github.io</a>
      

      
      </p>
          <!-- Please don't remove this, keep my open source work credited :) -->
    <p class="theme-by text-muted">
      Theme by
      <a href="https://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
    </p>
      </div>
    </div>
  </div>
</footer>

  
    






  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
      	if (typeof jQuery == 'undefined') {
      	  document.write('<script src="/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
      	}
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/main.js"></script>
    
  


  
  </body>
</html>
