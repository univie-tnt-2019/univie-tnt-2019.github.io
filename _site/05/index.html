<!DOCTYPE html>
<html lang="en">
  <!-- Beautiful Jekyll | MIT license | Copyright Dean Attali 2016 -->
  <head>
  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, viewport-fit=cover">

  <title>L05 Georeferencing with QGIS</title>

  <meta name="author" content="Students of the Class" />

  

  <link rel="alternate" type="application/rss+xml" title="070146 KU Methodenkurs (2019S) - TNT—Tools & Techniques for Digital Humanities" href="/feed.xml" />

  

  

  


  
    
      
  <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.0/css/font-awesome.min.css" />


    
  

  
    
      <link rel="stylesheet" href="/css/bootstrap.min.css" />
    
      <link rel="stylesheet" href="/css/bootstrap-social.css" />
    
      <link rel="stylesheet" href="/css/main.css" />
    
  

  
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" />
    
      <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" />
    
  

  

  

  

    <!-- Facebook OpenGraph tags -->
  

  
  <meta property="og:title" content="L05 Georeferencing with QGIS" />
  

   
  <meta property="og:description" content="# Goals: Introduction to “geographical information systems” (GIS) and some of the basics techniques. The focus will be mainly on how one can digitize an image of a map—the process of georeferencing—and extract useful geographical information from it. # Software: * QGIS, a Free and Open Source Geographic Information System...">
  


  <meta property="og:type" content="website" />

  
  <meta property="og:url" content="http://localhost:4000/05/" />
  <link rel="canonical" href="http://localhost:4000/05/" />
  

  
  <meta property="og:image" content="http://localhost:4000/img/avatar-icon.png" />
  


  <!-- Twitter summary cards -->
  <meta name="twitter:card" content="summary" />
  <meta name="twitter:site" content="@" />
  <meta name="twitter:creator" content="@" />

  
  <meta name="twitter:title" content="L05 Georeferencing with QGIS" />
  

  
  <meta name="twitter:description" content="# Goals: Introduction to “geographical information systems” (GIS) and some of the basics techniques. The focus will be mainly on how one can digitize an image of a map—the process of georeferencing—and extract useful geographical information from it. # Software: * QGIS, a Free and Open Source Geographic Information System...">
  

  
  <meta name="twitter:image" content="http://localhost:4000/img/avatar-icon.png" />
  

  

  

</head>


  <body>

    

  
    <nav class="navbar navbar-default navbar-fixed-top navbar-custom">
  <div class="container-fluid">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#main-navbar">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      
        <a class="navbar-brand" href="http://localhost:4000">070146 KU Methodenkurs (2019S)</a>
      
    </div>

    <div class="collapse navbar-collapse" id="main-navbar">
      <ul class="nav navbar-nav navbar-right">
      
        
          <li>
            






<a href="/about">Syllabus</a>

          </li>
        
        
        
          <li class="navlinks-container">
            <a class="navlinks-parent" href="javascript:void(0)">Lessons</a>
            <div class="navlinks-children">
              
                
                  






<a href="/01">01. CM and AW I</a>

                
              
                
                  






<a href="/02">02. Command Line</a>

                
              
                
                  






<a href="/03">03. VC and Collaboration</a>

                
              
                
                  






<a href="/04">04. CM and AW II</a>

                
              
                
                  






<a href="/05">05. Georeferencing</a>

                
              
                
                  






<a href="/06">06. RegEx</a>

                
              
                
                  






<a href="/07">07. Webscraping</a>

                
              
                
                  






<a href="/08">08. Text Markup [XML]</a>

                
              
                
                  






<a href="/09">09. Structuring data</a>

                
              
                
                  






<a href="/10">10. Text to Map (1/2)</a>

                
              
                
                  






<a href="/11">11. Text to Map (2/2)</a>

                
              
                
                  






<a href="/12">12. TM</a>

                
              
                
                  






<a href="/13">13. SNA</a>

                
              
            </div>
          </li>
        
        
        
          <li>
            






<a href="/resources">Resources</a>

          </li>
        
        
      </ul>
    </div>

	
	<div class="avatar-container">
	  <div class="avatar-img-border">
	    <a href="http://localhost:4000">
	      <img class="avatar-img" src="/img/avatar-icon.png" />
		</a>
	  </div>
	</div>
	

  </div>
</nav>


    <!-- TODO this file has become a mess, refactor it -->





<header class="header-section ">

<div class="intro-header no-img">
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <div class="page-heading">
          <h1>L05 Georeferencing with QGIS</h1>
		  
		  
		  
        </div>
      </div>
    </div>
  </div>
</div>
</header>





<div class="container" role="main">
  <div class="row">
    <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
      <h1 id="goals">Goals:</h1>

<p>Introduction to “geographical information systems” (GIS) and some of the basics techniques. The focus will be mainly on how one can digitize an image of a map—the process of georeferencing—and extract useful geographical information from it.</p>

<h1 id="software">Software:</h1>

<ul>
  <li>QGIS, a Free and Open Source Geographic Information System
(install it from <a href="https://qgis.org/en/site/">https://qgis.org/en/site/</a>)</li>
</ul>

<h1 id="class">Class:</h1>

<ul>
  <li>Basics of QGIS</li>
  <li>Basics of Georeferencing</li>
</ul>

<h1 id="projection-issues">Projection Issues</h1>

<p><img src="/files/05/headGlobus.jpg" alt="US_eastStates_03.jpg" /></p>

<p>See, <a href="https://en.wikipedia.org/wiki/List_of_map_projections">https://en.wikipedia.org/wiki/List_of_map_projections</a>.</p>

<h1 id="a-digital-map-layers-of-goodness">A Digital Map: Layers of Goodness</h1>

<p><img src="/files/05/maps_layers.jpg" alt="US_eastStates_03.jpg" /></p>

<ul>
  <li>Layers:
    <ul>
      <li>Analytical Layer</li>
      <li>Our Data</li>
      <li>Annotation/Legend</li>
    </ul>
  </li>
  <li>Social Geography
    <ul>
      <li>Political Boundaries</li>
      <li>Settlements, etc.</li>
    </ul>
  </li>
  <li>Physical Geography
    <ul>
      <li>Types of surface</li>
      <li>Continents / Coastal Line</li>
      <li>Elevation profile</li>
      <li>Rivers, Lakes, etc.</li>
    </ul>
  </li>
  <li>Base Layer: Graticule</li>
</ul>

<h1 id="main-types-of-data-points-lines-polygons">Main Types of Data: Points, Lines, Polygons</h1>

<ul>
  <li>Analytical Layer
    <ul>
      <li>Our Data
        <ul>
          <li>Points:
            <ul>
              <li>item, x<strong>[1]</strong>, point(lat, lon)<strong>[2]</strong></li>
            </ul>
          </li>
          <li>Lines:
            <ul>
              <li>item, x<strong>[1]</strong>, from(lat, lon)<strong>[2]</strong>, to(lat, lon)<strong>[2]</strong></li>
            </ul>
          </li>
          <li>Polygons:
            <ul>
              <li>item, x, area(lat, lon; lat, lon; … lat, lon)<strong>[2]</strong></li>
            </ul>
          </li>
        </ul>
      </li>
      <li>Annotation/Legend</li>
    </ul>
  </li>
</ul>

<p><strong>[1]</strong> where x is a categorical parameter; <strong>[2]</strong> lat/lon: decimal coordinates (not DMS)</p>

<h1 id="georeferencing">Georeferencing</h1>

<p>QGIS must be installed and running. <em>Note:</em> Interfaces might differ from system to system; the same applies to different versions of QGIS. Before we proceed, you may want to add Google Layers. To Add Google maps layer: (on the left pane, <em>Browser</em>) XYZ &gt; New connection &gt; paste one of the following links (Source:  <a href="https://geogeek.xyz/how-to-add-google-maps-layers-in-qgis-3.html">https://geogeek.xyz/how-to-add-google-maps-layers-in-qgis-3.html</a>):</p>

<ol>
  <li><strong>Google Maps</strong>: https://mt1.google.com/vt/lyrs=r&amp;x={x}&amp;y={y}&amp;z={z}</li>
  <li><strong>Google Satellite</strong>: http://www.google.cn/maps/vt?lyrs=s@189&amp;gl=cn&amp;x={x}&amp;y={y}&amp;z={z}</li>
  <li><strong>Google Satellite Hybrid</strong>: https://mt1.google.com/vt/lyrs=y&amp;x={x}&amp;y={y}&amp;z={z}</li>
  <li><strong>Google Terrain</strong>: https://mt1.google.com/vt/lyrs=t&amp;x={x}&amp;y={y}&amp;z={z}</li>
  <li><strong>Google Roads</strong>: https://mt1.google.com/vt/lyrs=h&amp;x={x}&amp;y={y}&amp;z={z}</li>
</ol>

<p><strong>NB:</strong> Images of maps to work with below</p>

<h2 id="step-by-step-instructions">Step-by-step instructions</h2>

<ul>
  <li>In your <code class="highlighter-rouge">XYZ Tiles</code>, double click on any Google layer that you added (or on OpenStreetMap)
    <ul>
      <li>A layer should be added to the main map (see, Layer pane)</li>
    </ul>
  </li>
  <li>Open Georeferencer: <code class="highlighter-rouge">Raster</code> &gt; <code class="highlighter-rouge">Georeferencer</code>
    <ul>
      <li>if you do not see it there, it must be activated first:
        <ul>
          <li><code class="highlighter-rouge">Plugins</code> &gt; <code class="highlighter-rouge">Manage and Install Plugins...</code> &gt; [search for <em>georeferencer</em>], then tick a box against <strong>Georeferencer GDAL</strong></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>In Georeferencer: <code class="highlighter-rouge">File</code> &gt; <code class="highlighter-rouge">Open Raster</code> (also the first button on the main panel)
    <ul>
      <li>Choose a file. Lets start with <em>US_eastStates_03.jpg</em> (this one has a grid, so it will be easier to process)</li>
      <li>In <em>Coordinate Reference System Selector</em>, choose <strong>WGS 84 / Pseudo-Mercator</strong>, then clock <code class="highlighter-rouge">OK</code></li>
    </ul>
  </li>
  <li>Open <code class="highlighter-rouge">Settings</code> &gt; <code class="highlighter-rouge">Transformation settings</code> (or click the yellow gears button)
    <ul>
      <li>Choose settings like on the screenshot below (you can also change <code class="highlighter-rouge">Compression</code> setting, which will generate a smaller map-image):
<img src="/files/05/transfSettings.png" alt="US_eastStates_03.jpg" /></li>
    </ul>
  </li>
  <li>Now, adding georeference points:
<img src="/files/05/coordinates.png" alt="US_eastStates_03.jpg" />
    <ul>
      <li>If you have a grid, it is very easy: just type in coordinates</li>
      <li>If you don’t, it is tricky: you need to find the same features on the image and on the map (for this, click on <code class="highlighter-rouge">From Map Canvas</code>)</li>
    </ul>
  </li>
  <li><strong>[!!!]</strong> Ideally, if you know projection of the map, you only need a few points; this almost never happens, so, the more points you create, the more precisely your image will be georeferenced. This is easy when you have a grid.</li>
  <li>When you are done with collecting points, click on <code class="highlighter-rouge">PLAY</code> button (green triangle)
    <ul>
      <li>The image of your georeferenced map should appear in the main window.</li>
    </ul>
  </li>
  <li><strong>[!!!]</strong> Keep in mind that you add layers to your map and a layer on top may cover the layer below!</li>
</ul>

<p>In general, this procedure can be extremely helpful if:</p>

<ul>
  <li>you need to collect geographical information from historical maps</li>
  <li>you want to use some historical map as the base layer for mapping your data</li>
</ul>

<h2 id="collecting-point-data-very-simple-way">Collecting Point Data (Very Simple Way)</h2>

<ul>
  <li>Create a CSV file; copy/paste the content from below (three lines of text!)</li>
</ul>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>city,state,lon,lat,lon1,lat1
New York,New York,-8234229.297,4970380.761,-8234229.297,4970380.761
Philadelphia,Pennsylvania,-8368867.370,4858182.367,-8368867.370,4858182.367
</code></pre></div></div>

<ul>
  <li>In QGIS, load this file by:
    <ul>
      <li><code class="highlighter-rouge">Layer</code> &gt; <code class="highlighter-rouge">Add Layer</code> &gt; <code class="highlighter-rouge">Add Delimited Text Layer</code></li>
      <li>Settings should look like on the screenshor below
        <ul>
          <li>CSV (comma separated format)</li>
          <li>Point coodinates (X field: <code class="highlighter-rouge">lon</code>; Y field: <code class="highlighter-rouge">lat</code>)</li>
          <li>Geometry CRS: <code class="highlighter-rouge">EPSG:4325 - WGS 84 / Pseudo Mercator</code></li>
          <li>(you will have only two lines of data, instead of five)</li>
          <li>Make sure to click <code class="highlighter-rouge">Add</code> when you are done!
<img src="/files/05/delimitedTextLayer.png" alt="US_eastStates_03.jpg" /></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>The layer is there, but we need to add labels to see the cities
    <ul>
      <li>Right-click on the layer &gt; Properties</li>
      <li>On the tab <code class="highlighter-rouge">Labels</code> change the settings like on the screenshot below</li>
      <li>Click <code class="highlighter-rouge">Apply</code>, then <code class="highlighter-rouge">OK</code>.
<img src="/files/05/citiesLabels.png" alt="US_eastStates_03.jpg" /></li>
    </ul>
  </li>
  <li>You should see two cities now on the map:
    <ul>
      <li>If nothing appears, try: Right-click on the layer &gt; Set CRS &gt; Set Layer CRS: Choose <code class="highlighter-rouge">WGS 84 / Pseudo-Mercator</code></li>
    </ul>
  </li>
  <li>Now, we can use <code class="highlighter-rouge">Coordinate Capture</code> plugin to collect data from our georeferenced map:
    <ul>
      <li>If activated, coordinarte capture should be visible in lower right corner
        <ul>
          <li>To activate coordinate capture: <code class="highlighter-rouge">Plugins</code> &gt; <code class="highlighter-rouge">Manage and Install Plugins...</code> &gt; [search for <em>coordinate capture</em>], then tick a box against <strong>Coordinate Capture</strong></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>Collecting coordinates:
    <ul>
      <li>Keep the initial CSV open in some editor</li>
      <li>In <code class="highlighter-rouge">Coordinate Capture</code>, click <em>Start capture</em>
        <ul>
          <li>Click on any point on the map &gt; coordinates of that location will appear in the plugin</li>
          <li>Click <code class="highlighter-rouge">Copy to Clipboard</code></li>
        </ul>
      </li>
      <li>Go back to the open CSV:
        <ul>
          <li>Add a new line:
            <ul>
              <li>Type the name of the city</li>
              <li>Add comma and type the name of the state (alternatively, just add another comma)</li>
              <li>Now, paste what you copied into Clipboard (this will add two sets of coordinates)</li>
            </ul>
          </li>
          <li>Save the file</li>
        </ul>
      </li>
      <li>Back in QGIS:
        <ul>
          <li>Switch the layer off and on: after that the newly-added city must appear on the map.</li>
        </ul>
      </li>
      <li>Repeat, until all required data is collected.</li>
    </ul>
  </li>
</ul>

<p><img src="/files/05/newCities.png" alt="US_eastStates_03.jpg" /></p>

<h1 id="images-of-maps">Images of Maps</h1>

<p><img src="/files/05/US_eastStates_03.jpg" alt="US_eastStates_03.jpg" /></p>

<p><img src="/files/05/US_eastStates_04.jpg" alt="US_eastStates_04.jpg" /></p>

<p><img src="/files/05/US_Virginia_01.jpg" alt="US_Virginia_01.jpg" /></p>

<h1 id="reference-materials">Reference Materials:</h1>

<ul>
  <li>
    <p>Clifford, Jim, Josh MacFadyen, and Daniel Macfarlane. 2013. “Installing QGIS 2.0 and Adding Layers.” Programming Historian, December. <a href="https://programminghistorian.org/lessons/qgis-layers">https://programminghistorian.org/lessons/qgis-layers</a>.</p>
  </li>
  <li>
    <p>Clifford, Jim, Josh MacFadyen, and Daniel Macfarlane. 2013. “Georeferencing in QGIS 2.0.” Programming Historian, December. <a href="https://programminghistorian.org/lessons/georeferencing-qgis">https://programminghistorian.org/lessons/georeferencing-qgis</a>.</p>
  </li>
</ul>

<h1 id="homework">Homework:</h1>

<ol>
  <li>Georeference two of three offered maps of the US during the Civil War;</li>
  <li>Collect coordinates for 20 place names from each map (into a CSV format: use the same structure as given above).</li>
  <li>Prepare a blogpost on your website with screenshots of both maps and paste the content of your CSV files below each map.</li>
  <li>Codecademy’s <em>Learn Python</em>, Unit 3-4.</li>
  <li>Github: publish the confirmation screenshot as a post on your new site.</li>
</ol>

	    
        <div class="disqus-comments">
	        <div class="comments">
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'univie-tnt-2019';
        /* ensure that pages with query string get the same discussion */
            var url_parts = window.location.href.split("?");
            var disqus_url = url_parts[0];
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    <script id="dsq-count-scr" src="//univie-tnt-2019.disqus.com/count.js" async></script>
</div>
        </div>
	        
        <div class="staticman-comments">
          

        </div>
	    
    </div>
  </div>
</div>


    <footer>
  <div class="container beautiful-jekyll-footer">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
        <ul class="list-inline text-center footer-links"><li><a href="/feed.xml" title="RSS"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">RSS</span>
              </a>
            </li><li><a href="mailto:maxim.romanov@univie.ac.at" title="Email me"><span class="fa-stack fa-lg" aria-hidden="true">
                  <i class="fa fa-circle fa-stack-2x"></i>
                  <i class="fa fa-envelope fa-stack-1x fa-inverse"></i>
                </span>
                <span class="sr-only">Email me</span>
              </a>
            </li></ul>
      <p class="copyright text-muted">
      Students of the Class
      &nbsp;&bull;&nbsp;
      2019

      
      &nbsp;&bull;&nbsp;
      <a href="http://localhost:4000">univie-tnt-2019.github.io</a>
      

      
      </p>
          <!-- Please don't remove this, keep my open source work credited :) -->
    <p class="theme-by text-muted">
      Theme by
      <a href="https://deanattali.com/beautiful-jekyll/">beautiful-jekyll</a>
    </p>
      </div>
    </div>
  </div>
</footer>

  
    






  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
      <script>
      	if (typeof jQuery == 'undefined') {
      	  document.write('<script src="/js/jquery-1.11.2.min.js"></scr' + 'ipt>');
      	}
      </script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/bootstrap.min.js"></script>
    
  
    <!-- doing something a bit funky here because I want to be careful not to include JQuery twice! -->
    
	<script src="/js/main.js"></script>
    
  


  
  </body>
</html>
